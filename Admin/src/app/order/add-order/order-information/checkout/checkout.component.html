<form [formGroup]="checkoutForm">
  <div nz-row>
    <div class="checkout-info pe-2" nz-col nzSpan="14">
      <div class="checkout-card bg-white p-3">
        <p class="fs-6 fw-semibold mb-3">Thanh toán</p>
        <label class="mb-3" formControlName="freeshipChecked" (ngModelChange)="onFreeshipChecked()" nz-checkbox>Miễn phí giao hàng</label>

        <div nz-row>
          <div nz-col class="d-flex align-items-center" nzSpan="16">
            <span>Phí vận chuyển</span>
          </div>
          <div nz-col nzSpan="8">
            <nz-input-group nzSuffix="đ">
              <input class="text-end" (keydown)="handleKeydown($event)" formControlName="shippingFee" type="number" nz-input (change)="onShippingFeesChange()" />
            </nz-input-group>
          </div>
        </div>

        <div nz-row class="mt-2">
          <div nz-col class="d-flex align-items-center" nzSpan="16">
            <span>Giảm giá đơn hàng</span>
          </div>
          <div nz-col nzSpan="8">
            <nz-input-group nzSuffix="đ">
              <input #discount class="text-end" formControlName="orderDiscount" type="number" nz-input
                (change)="onFeesChange()" />
            </nz-input-group>
          </div>
        </div>

        <div nz-row class="mt-2">
          <div nz-col class="d-flex align-items-center" nzSpan="16">
            <span>Tiền chuyển khoản</span>
          </div>
          <div nz-col nzSpan="8">
            <nz-input-group nzSuffix="đ">
              <input class="text-end" formControlName="bankTransferedAmount" type="number" nz-input (change)="onFeesChange()"/>
            </nz-input-group>
          </div>
        </div>

        <div nz-row class="mt-2">
          <div nz-col class="d-flex align-items-center" nzSpan="16">
            <span>Phụ thu</span>
          </div>
          <div nz-col nzSpan="8">
            <nz-input-group nzSuffix="đ">
              <input class="text-end" formControlName="extraFee" type="number" nz-input (change)="onFeesChange()"/>
            </nz-input-group>
          </div>
        </div>

        <div class="total-info mt-3 p-3 rounded">
          <div class="d-flex justify-content-between">
            <span>Tổng số tiền</span>
            <span class="fw-semibold">{{ orderTotal | thousandSeparator }}đ</span>
          </div>

          <div class="d-flex justify-content-between mt-1">
            <span>Giảm giá</span>
            <span nz-typography nzType="success" class="fw-semibold">{{ orderDiscount | thousandSeparator }}đ</span>
          </div>

          <hr class="dashed" />

          <div class="d-flex justify-content-between">
            <span>Sau giảm giá</span>
            <span class="fw-semibold">{{ afterDiscount | thousandSeparator }}đ</span>
          </div>

          <div class="d-flex justify-content-between mt-1">
            <span>Cần thanh toán</span>
            <span class="fw-semibold text-primary">{{ afterDiscount | thousandSeparator }}đ</span>
          </div>

          <div class="d-flex justify-content-between mt-1">
            <span>Đã thanh toán</span>
            <span class="fw-semibold">{{ bankTransferedAmount | thousandSeparator }}đ</span>
          </div>

          <hr class="dashed" />

          <div class="d-flex justify-content-between mt-1">
            <span>Còn thiếu</span>
            <span class="fw-semibold text-danger">{{ total | thousandSeparator }}đ</span>
          </div>
        </div>
      </div>
    </div>

    <div class="checkout-info" nz-col nzSpan="10">
      <div class="checkout-card bg-white p-3">
        <p class="fs-6 fw-semibold">Ghi chú</p>

        <textarea class="input-bg" nzBorderless rows="4" nz-input formControlName="orderNote"></textarea>
      </div>
    </div>
  </div>
</form>
