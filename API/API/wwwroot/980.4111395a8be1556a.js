"use strict";(self.webpackChunkClientUI=self.webpackChunkClientUI||[]).push([[980],{7980:(ft,O,s)=>{s.r(O),s.d(O,{ProductDetailModule:()=>gt});var l=s(177),$=s(9863),b=s(2461),j=s(4412),x=s(1413),h=s(6977),t=s(7705),g=s(1626),f=s(5312);let z=(()=>{class o{constructor(n){this.http=n,this.baseApiUrl=f.c.apiUrl}getProductBySlug(n){const e=(new g.Nl).set("includeSkuValues","true").set("includeOptions","true");return this.http.get(this.baseApiUrl+"products/slug/"+n,{params:e})}static{this.\u0275fac=function(e){return new(e||o)(t.KVO(g.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var E=s(5559);let y=(()=>{class o{constructor(n){this.http=n,this.apiUrl=`${f.c.apiUrl}recommendations/track`,this.viewStartTime=null,this.currentProductId=null,this.setupUnloadListener()}trackProductView(n){this.currentProductId=n,this.viewStartTime=Date.now()}trackAddToCart(n,e){return this.http.post(`${this.apiUrl}/cart`,{productId:n,skuId:e},{withCredentials:!0})}trackPurchase(n){return this.http.post(`${this.apiUrl}/purchase`,n,{withCredentials:!0})}trackRecommendationClick(n,e){return this.http.post(`${this.apiUrl}/click`,{productId:n,reasonCode:e},{withCredentials:!0})}setupUnloadListener(){window.addEventListener("beforeunload",()=>{if(this.viewStartTime&&this.currentProductId){const n=Math.floor((Date.now()-this.viewStartTime)/1e3),e=JSON.stringify({productId:this.currentProductId,durationSeconds:n});navigator.sendBeacon(`${f.c.apiUrl}/recommendations/track/view`,new Blob([e],{type:"application/json"}))}})}static{this.\u0275fac=function(e){return new(e||o)(t.KVO(g.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var D=s(9974),F=s(4360),G=s(3669),U=s(1584),B=s(8750);function C(o=1/0){let r;r=o&&"object"==typeof o?o:{count:o};const{count:n=1/0,delay:e,resetOnSuccess:i=!1}=r;return n<=0?G.D:(0,D.N)((c,a)=>{let m,d=0;const w=()=>{let p=!1;m=c.subscribe((0,F._)(a,u=>{i&&(d=0),a.next(u)},void 0,u=>{if(d++<n){const S=()=>{m?(m.unsubscribe(),m=null,w()):p=!0};if(null!=e){const ht="number"==typeof e?(0,U.O)(e):(0,B.Tg)(e(u,d)),R=(0,F._)(a,()=>{R.unsubscribe(),S()},()=>{a.complete()});ht.subscribe(R)}else S()}else a.error(u)})),p&&(m.unsubscribe(),m=null,w())};w()})}var v=s(9437),V=s(8810);let N=(()=>{class o{constructor(n){this.http=n,this.apiUrl=f.c.apiUrl}getRecommendations(n=10){const e=(new g.Nl).set("limit",n.toString());return this.http.get(this.apiUrl,{params:e,withCredentials:!0}).pipe(C(2),(0,v.W)(this.handleError))}getTrendingProducts(n=10){const e=(new g.Nl).set("limit",n.toString());return this.http.get(`${this.apiUrl}trending`,{params:e,withCredentials:!0}).pipe(C(2),(0,v.W)(this.handleError))}getSimilarProducts(n,e=8){const i=(new g.Nl).set("limit",e.toString());return this.http.get(`${this.apiUrl}recommendations/similar/${n}`,{params:i,withCredentials:!0}).pipe(C(2),(0,v.W)(this.handleError))}handleError(n){return console.error("Recommendation service error:",n),(0,V.$)(()=>new Error("Failed to load recommendations"))}static{this.\u0275fac=function(e){return new(e||o)(t.KVO(g.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function Y(o,r){if(1&o&&(t.j41(0,"span",6),t.EFF(1),t.k0s()),2&o){const n=t.XpG();t.R7$(1),t.JRh(n.title)}}function X(o,r){1&o&&(t.j41(0,"div",7),t.nrm(1,"div",8),t.j41(2,"p"),t.EFF(3,"Loading recommendations..."),t.k0s()())}function A(o,r){if(1&o){const n=t.RV6();t.j41(0,"div",9)(1,"p"),t.EFF(2),t.k0s(),t.j41(3,"button",10),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.retry())}),t.EFF(4,"Retry"),t.k0s()()}if(2&o){const n=t.XpG();t.R7$(2),t.JRh(n.error)}}function Q(o,r){1&o&&(t.j41(0,"span",21),t.EFF(1," Only a few products left "),t.k0s())}function K(o,r){if(1&o&&(t.j41(0,"span",22),t.EFF(1),t.k0s()),2&o){const n=t.XpG().$implicit;t.R7$(1),t.SpI(" ",n.reasonText," ")}}function J(o,r){if(1&o){const n=t.RV6();t.j41(0,"div",13),t.bIt("click",function(){const c=t.eBV(n).$implicit,a=t.XpG(2);return t.Njj(a.onProductClick(c))}),t.j41(1,"div",14),t.nrm(2,"img",15),t.DNE(3,Q,2,0,"span",16),t.k0s(),t.j41(4,"div",17)(5,"h4",18),t.EFF(6),t.k0s(),t.j41(7,"p",19),t.EFF(8),t.k0s(),t.DNE(9,K,2,1,"span",20),t.k0s()()}if(2&o){const n=r.$implicit,e=t.XpG(2);t.R7$(2),t.Y8G("src",n.imageUrl,t.B4B)("alt",n.productName),t.R7$(1),t.Y8G("ngIf",e.showStock&&n.totalStock<10),t.R7$(3),t.JRh(n.productName),t.R7$(2),t.JRh(n.priceDisplay),t.R7$(1),t.Y8G("ngIf",e.showReason&&n.reasonText)}}function H(o,r){if(1&o&&(t.j41(0,"div",11),t.DNE(1,J,10,6,"div",12),t.k0s()),2&o){const n=t.XpG();t.Y8G("ngClass",n.getGridClass()),t.R7$(1),t.Y8G("ngForOf",n.recommendations)}}function L(o,r){1&o&&(t.j41(0,"div",23)(1,"p"),t.EFF(2,"No recommendations found"),t.k0s()())}let W=(()=>{class o{constructor(n,e,i){this.recommendationService=n,this.trackingService=e,this.router=i,this.type="general",this.limit=10,this.columns=4,this.showColors=!0,this.showSizes=!0,this.showStock=!0,this.showReason=!0,this.recommendations=[],this.loading=!1,this.error=null,this.destroy$=new x.B}ngOnInit(){}ngOnChanges(n){n.productId&&n.productId.currentValue&&this.loadRecommendations()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadRecommendations(){let n;switch(this.loading=!0,this.error=null,this.type){case"trending":n=this.recommendationService.getTrendingProducts(this.limit);break;case"similar":if(!this.productId)return this.error="Product ID is required for similar recommendations",void(this.loading=!1);n=this.recommendationService.getSimilarProducts(this.productId,this.limit);break;default:n=this.recommendationService.getRecommendations(this.limit)}n.pipe((0,h.Q)(this.destroy$)).subscribe({next:e=>{this.recommendations=e,this.loading=!1},error:e=>{this.error="Kh\xf4ng th\u1ec3 t\u1ea3i g\u1ee3i \xfd s\u1ea3n ph\u1ea9m",this.loading=!1,console.error("Failed to load recommendations:",e)}})}onProductClick(n){this.trackingService.trackRecommendationClick(n.productId,n.reasonCode).subscribe(),this.router.navigate(["/products",n.productSlug])}getGridClass(){return`grid-cols-${this.columns}`}retry(){this.loadRecommendations()}getColorCode(n){return{\u0111\u1ecf:"#FF0000",red:"#FF0000",xanh:"#0000FF",blue:"#0000FF",\u0111en:"#000000",black:"#000000",tr\u1eafng:"#FFFFFF",white:"#FFFFFF",v\u00e0ng:"#FFFF00",yellow:"#FFFF00",h\u1ed3ng:"#FFC0CB",pink:"#FFC0CB",x\u00e1m:"#808080",gray:"#808080",n\u00e2u:"#8B4513",brown:"#8B4513",cam:"#FFA500",orange:"#FFA500"}[n.toLowerCase()]||"#CCCCCC"}static{this.\u0275fac=function(e){return new(e||o)(t.rXU(N),t.rXU(y),t.rXU(b.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-recommendation"]],inputs:{type:"type",productId:"productId",limit:"limit",columns:"columns",showColors:"showColors",showSizes:"showSizes",showStock:"showStock",showReason:"showReason",title:"title"},features:[t.OA$],decls:6,vars:5,consts:[[1,"recommendations-section","tw-p-3"],["class","tw-text-xl tw-font-semibold tw-block tw-mb-4",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","recommendations-grid",3,"ngClass",4,"ngIf"],["class","empty-state bg-app",4,"ngIf"],[1,"tw-text-xl","tw-font-semibold","tw-block","tw-mb-4"],[1,"loading-state"],[1,"spinner"],[1,"error-state"],[1,"retry-btn",3,"click"],[1,"recommendations-grid",3,"ngClass"],["class","recommendation-card bg-app",3,"click",4,"ngFor","ngForOf"],[1,"recommendation-card","bg-app",3,"click"],[1,"product-image"],["loading","lazy",3,"src","alt"],["class","stock-badge low-stock",4,"ngIf"],[1,"product-info","bg-app"],[1,"product-name"],[1,"product-price"],["class","recommendation-reason tw-border tw-border-black",4,"ngIf"],[1,"stock-badge","low-stock"],[1,"recommendation-reason","tw-border","tw-border-black"],[1,"empty-state","bg-app"]],template:function(e,i){1&e&&(t.j41(0,"div",0),t.DNE(1,Y,2,1,"span",1),t.DNE(2,X,4,0,"div",2),t.DNE(3,A,5,1,"div",3),t.DNE(4,H,2,2,"div",4),t.DNE(5,L,3,0,"div",5),t.k0s()),2&e&&(t.R7$(1),t.Y8G("ngIf",i.title),t.R7$(1),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",i.error&&!i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&!i.error&&i.recommendations.length>0),t.R7$(1),t.Y8G("ngIf",!i.loading&&!i.error&&0===i.recommendations.length))},dependencies:[l.YU,l.Sq,l.bT],styles:[".recommendations-section[_ngcontent-%COMP%]{margin:40px 0;@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}}.recommendations-section[_ngcontent-%COMP%]   .bg-app[_ngcontent-%COMP%]{background-color:var(--background-color)!important}.recommendations-section[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:is(.loading-state, .error-state[_ngcontent-%COMP%], .empty-state)[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#666}.recommendations-section[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]{color:#d32f2f}.recommendations-section[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]{margin-top:10px;padding:8px 16px;background:#d32f2f;color:#fff;border:none;border-radius:4px;cursor:pointer}.recommendations-section[_ngcontent-%COMP%]   .error-state[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]:hover{background:#b71c1c}.recommendations-section[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border:3px solid #f3f3f3;border-top:3px solid #333;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:0 auto 10px}.recommendations-grid[_ngcontent-%COMP%]{display:grid;gap:20px}.recommendations-grid.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.recommendations-grid.grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.recommendations-grid.grid-cols-4[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}@media (max-width: 1024px){.recommendations-grid.grid-cols-4[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.recommendations-grid[_ngcontent-%COMP%]:is(.grid-cols-4, .grid-cols-3)[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 480px){.recommendations-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.recommendation-card[_ngcontent-%COMP%]{background:white;border:1px solid #e5e5e5;overflow:hidden;cursor:pointer;transition:transform .2s,box-shadow .2s}.recommendation-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 12px #0000001a}.recommendation-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{position:relative;width:100%;padding-top:133%;overflow:hidden;background:#f5f5f5;img {position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;} .stock-badge {position: absolute; top: 10px; right: 10px; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 500; background: white; color: #333; &.low-stock {background: #ff4444; color: white;}}}.recommendation-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{padding:12px}.recommendation-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin:0 0 8px;color:#333;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;line-height:1.4}.recommendation-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0 0 8px}.recommendation-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .color-swatches[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin:8px 0;flex-wrap:wrap}.recommendation-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .color-swatches[_ngcontent-%COMP%]   .color-swatch[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;border:2px solid #e5e5e5;cursor:pointer;transition:transform .2s}.recommendation-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .color-swatches[_ngcontent-%COMP%]   .color-swatch[_ngcontent-%COMP%]:hover{transform:scale(1.15)}.recommendation-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .color-swatches[_ngcontent-%COMP%]   .more-colors[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-left:4px}.recommendation-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .size-badges[_ngcontent-%COMP%]{display:flex;gap:4px;margin:8px 0;flex-wrap:wrap}.recommendation-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .size-badges[_ngcontent-%COMP%]   .size-badge[_ngcontent-%COMP%]{padding:2px 8px;border:1px solid #ddd;border-radius:4px;font-size:12px;background:white;color:#666}.recommendation-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .recommendation-reason[_ngcontent-%COMP%]{display:inline-block;font-size:11px;color:#242424;margin-top:8px;padding:3px 8px;background:var(--background-color);border-radius:4px}"]})}}return o})();var _=s(513),k=s(6389),M=s(5930),P=s(8799);let Z=(()=>{class o{constructor(){this.atcClicked=new t.bkB}addToCartClicked(){this.atcClicked.emit()}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-products-footer"]],outputs:{atcClicked:"atcClicked"},decls:6,vars:0,consts:[[1,"tw-flex","tw-flex-row","tw-px-3","tw-w-full"],["nz-button","","nzType","default","nzSize","large",1,"tw-text-sm","bg-app"],["nz-icon","","nzType","heart"],["nz-button","","nzType","default","nzSize","large",1,"tw-ms-2","tw-flex","tw-items-center","tw-justify-center","tw-flex-1","tw-text-sm","tw-bg-black","text-light","btn-atc",3,"click"]],template:function(e,i){1&e&&(t.j41(0,"div",0)(1,"button",1),t.nrm(2,"span",2),t.k0s(),t.j41(3,"button",3),t.bIt("click",function(){return i.addToCartClicked()}),t.j41(4,"span"),t.EFF(5,"Th\xeam v\xe0o gi\u1ecf h\xe0ng"),t.k0s()()())},dependencies:[_.aO,k.c,M.p,P.Dn],styles:[".btn-atc[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem}.bg-app[_ngcontent-%COMP%]{background-color:var(--background-color)}"]})}}return o})();var T=s(7456);function q(o,r){if(1&o&&t.nrm(0,"img",10),2&o){const n=t.XpG().$implicit;t.Y8G("src",n.url,t.B4B)}}function tt(o,r){1&o&&t.DNE(0,q,1,1,"ng-template",9)}function nt(o,r){if(1&o&&(t.j41(0,"div",13),t.nrm(1,"img",14),t.k0s()),2&o){const n=r.$implicit;t.R7$(1),t.Y8G("src",n.url,t.B4B)("alt","Photo "+n.id)}}function ot(o,r){if(1&o&&(t.j41(0,"div",11),t.DNE(1,nt,2,2,"div",12),t.k0s()),2&o){const n=r.$implicit;t.R7$(1),t.Y8G("ngForOf",n)}}function et(o,r){if(1&o&&(t.j41(0,"div",15),t.nrm(1,"img",14),t.k0s()),2&o){const n=r.$implicit;t.R7$(1),t.Y8G("src",n.url,t.B4B)("alt","Photo "+n.id)}}let it=(()=>{class o{constructor(){this.photos=[],this.config={slidesPerView:1,navigation:!1,pagination:!0,scrollbar:{draggable:!0},autoplay:!1}}ngOnInit(){}get isEvenTotal(){return this.photos.length%2==0}get lastRowCount(){return this.isEvenTotal?4:3}get topRows(){const i=this.photos.slice(0,this.photos.length-this.lastRowCount),c=[];for(let a=0;a<i.length;a+=2)c.push(i.slice(a,a+2));return c}get lastRow(){return this.photos.slice(-this.lastRowCount)}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-product-images"]],inputs:{photos:"photos"},decls:9,vars:5,consts:[[1,"tw-min-h-[60vh]","md:tw-min-h-0"],[1,"h-100","md:tw-hidden",3,"config"],["swiperSlideShow",""],[4,"ngFor","ngForOf"],[1,"tw-hidden","md:tw-flex"],[1,"tw-container"],["class","tw-h-[800px] tw-grid tw-grid-cols-2 tw-gap-1 tw-mb-1",4,"ngFor","ngForOf"],[1,"tw-grid","tw-gap-1",3,"ngClass"],["class","tw-relative tw-overflow-hidden tw-aspect-square",4,"ngFor","ngForOf"],["swiperSlide",""],["nz-image","",1,"tw-object-top","w-100","h-100",3,"src"],[1,"tw-h-[800px]","tw-grid","tw-grid-cols-2","tw-gap-1","tw-mb-1"],["class","tw-h-full tw-w-full tw-relative tw-overflow-hidden tw-aspect-square",4,"ngFor","ngForOf"],[1,"tw-h-full","tw-w-full","tw-relative","tw-overflow-hidden","tw-aspect-square"],[1,"tw-w-full","tw-h-full","tw-object-cover",3,"src","alt"],[1,"tw-relative","tw-overflow-hidden","tw-aspect-square"]],template:function(e,i){1&e&&(t.j41(0,"div",0)(1,"swiper",1,2),t.DNE(3,tt,1,0,null,3),t.k0s(),t.j41(4,"div",4)(5,"div",5),t.DNE(6,ot,2,1,"div",6),t.j41(7,"div",7),t.DNE(8,et,2,2,"div",8),t.k0s()()()()),2&e&&(t.R7$(1),t.Y8G("config",i.config),t.R7$(2),t.Y8G("ngForOf",i.photos),t.R7$(3),t.Y8G("ngForOf",i.topRows),t.R7$(1),t.Y8G("ngClass",i.isEvenTotal?"tw-grid-cols-4":"tw-grid-cols-3"),t.R7$(1),t.Y8G("ngForOf",i.lastRow))},dependencies:[l.YU,l.Sq,T.Mf,T.T0]})}}return o})();var I=s(4696);function rt(o,r){1&o&&(t.j41(0,"span",6),t.bIt("click",function(e){return e.stopPropagation()}),t.k0s())}let st=(()=>{class o{constructor(){this.panels=[{active:!0,name:"M\xf4 t\u1ea3",disabled:!1},{active:!1,disabled:!1,name:"Ch\xednh s\xe1ch giao h\xe0ng"},{active:!1,disabled:!0,name:"Ch\xednh s\xe1ch \u0111\u1ed5i h\xe0ng"}]}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-description"]],inputs:{description:"description"},decls:12,vars:4,consts:[["nzExpandIconPosition","right",1,"bg-app"],["nzHeader","Description","nzActive","true","nzShowArrow","false",1,"pe-0","bg-app",3,"nzExtra"],[2,"margin","0"],["nzHeader","Shipping Policy","nzActive","false","nzShowArrow","false",1,"bg-app",3,"nzExtra"],["nzHeader","Return Policy","nzActive","false","nzShowArrow","false",1,"bg-app",3,"nzExtra"],["extraTpl",""],["nz-icon","","nzType","plus",3,"click"]],template:function(e,i){if(1&e&&(t.j41(0,"nz-collapse",0)(1,"nz-collapse-panel",1)(2,"p",2),t.EFF(3),t.k0s()(),t.j41(4,"nz-collapse-panel",3)(5,"p",2),t.EFF(6," Updating ... "),t.k0s()(),t.j41(7,"nz-collapse-panel",4)(8,"p",2),t.EFF(9," Updating ... "),t.k0s()()(),t.DNE(10,rt,1,0,"ng-template",null,5,t.C5r)),2&e){const c=t.sdS(11);t.R7$(1),t.Y8G("nzExtra",c),t.R7$(2),t.SpI(" ",i.description," "),t.R7$(1),t.Y8G("nzExtra",c),t.R7$(3),t.Y8G("nzExtra",c)}},dependencies:[I.Vz,I.pc,k.c,P.Dn],styles:["[_nghost-%COMP%]     .ant-collapse-icon-position-right>.ant-collapse-item>.ant-collapse-header{padding-right:16px;font-weight:700}.bg-app[_ngcontent-%COMP%]{background-color:var(--background-color)!important}[_nghost-%COMP%]     .bg-app.ant-collapse .ant-collapse-item{background-color:var(--background-color)!important}[_nghost-%COMP%]     .bg-app.ant-collapse .ant-collapse-item .ant-collapse-header{background-color:var(--background-color)!important}[_nghost-%COMP%]     .bg-app.ant-collapse .ant-collapse-item .ant-collapse-content{background-color:var(--background-color)!important}[_nghost-%COMP%]     .bg-app.ant-collapse .ant-collapse-item .ant-collapse-content-box{background-color:var(--background-color)!important}[_nghost-%COMP%]     .ant-collapse.bg-app .ant-collapse-item{background-color:var(--background-color)!important}[_nghost-%COMP%]     .ant-collapse.bg-app .ant-collapse-item .ant-collapse-header{background-color:var(--background-color)!important}[_nghost-%COMP%]     .ant-collapse.bg-app .ant-collapse-item .ant-collapse-content{background-color:var(--background-color)!important}[_nghost-%COMP%]     .ant-collapse.bg-app .ant-collapse-item .ant-collapse-content-box{background-color:var(--background-color)!important}"]})}}return o})();const ct=function(o){return{selected:o}};function at(o,r){if(1&o){const n=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){const c=t.eBV(n).$implicit,a=t.XpG().$implicit,d=t.XpG(2);return t.Njj(d.onSelectOption(a.id,c.id))}),t.EFF(1),t.k0s()}if(2&o){const n=r.$implicit,e=t.XpG().$implicit,i=t.XpG(2);t.AVh("selected",i.selectedOptions[e.id]===n.id),t.Y8G("ngClass",t.eq3(4,ct,i.selectedOptions[e.id]===n.id)),t.R7$(1),t.SpI(" ",n.valueName," ")}}function lt(o,r){if(1&o&&(t.j41(0,"div",18)(1,"div",19),t.EFF(2),t.k0s(),t.DNE(3,at,2,6,"button",20),t.k0s()),2&o){const n=r.$implicit;t.R7$(2),t.SpI("",n.optionName,":"),t.R7$(1),t.Y8G("ngForOf",n.productOptionValues)}}function dt(o,r){if(1&o){const n=t.RV6();t.j41(0,"div",1)(1,"p",2),t.EFF(2),t.k0s(),t.j41(3,"div",3)(4,"p",4),t.EFF(5),t.k0s(),t.j41(6,"p",5),t.EFF(7,"100.000 \u0111"),t.k0s()(),t.DNE(8,lt,4,2,"div",6),t.j41(9,"div",7)(10,"nz-button-group",8)(11,"button",9),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.decreaseQuantity())}),t.nrm(12,"span",10),t.k0s(),t.j41(13,"button",11)(14,"span",12),t.EFF(15),t.k0s()(),t.j41(16,"button",9),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.increaseQuantity())}),t.nrm(17,"span",13),t.k0s()(),t.j41(18,"button",14),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.onAddToCart())}),t.EFF(19," ADD TO CART "),t.k0s(),t.j41(20,"button",15),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.onAddToCart())}),t.EFF(21," BUY NOW "),t.k0s()(),t.j41(22,"div",16),t.nrm(23,"app-description",17),t.k0s()()}if(2&o){const n=t.XpG();t.R7$(2),t.JRh(n.product.name),t.R7$(3),t.SpI("SKU: ",n.product.productSKU,""),t.R7$(3),t.Y8G("ngForOf",n.product.productOptions),t.R7$(7),t.JRh(n.quantity),t.R7$(8),t.Y8G("description",n.product.description)}}let pt=(()=>{class o{constructor(){this.selectOptions=new t.bkB,this.selectQuantity=new t.bkB,this.addToCart=new t.bkB,this.selectedOptions={},this.quantity=1,this.productDescription="",this.errorMessage="",this.showError=!1}ngOnInit(){}ngOnChanges(n){n.product&&(this.selectedOptions={},this.showError=!1,this.product?.productOptions?.forEach(e=>{e.productOptionValues&&e.productOptionValues.length>0&&(this.selectedOptions[e.id]=e.productOptionValues[0].id)}),Object.keys(this.selectedOptions).length>0&&this.getSkuIdByProductOptions())}onSelectOption(n,e){this.selectedOptions[n]=e,this.showError=!1,this.getSkuIdByProductOptions()}onAddToCart(){this.getSkuIdByProductOptions()?(this.showError=!1,setTimeout(()=>{this.addToCart.emit()},0)):(this.showError=!0,this.errorMessage="Vui l\xf2ng ch\u1ecdn \u0111\u1ea7y \u0111\u1ee7 thu\u1ed9c t\xednh s\u1ea3n ph\u1ea9m ho\u1eb7c t\u1ed5 h\u1ee3p n\xe0y hi\u1ec7n kh\xf4ng c\xf3 s\u1eb5n.",console.error("Kh\xf4ng t\xecm th\u1ea5y \u0111\u1ed1i t\u01b0\u1ee3ng n\xe0o th\u1ecfa m\xe3n \u0111i\u1ec1u ki\u1ec7n. Kh\xf4ng th\u1ec3 th\xeam v\xe0o gi\u1ecf h\xe0ng."))}getSkuIdByProductOptions(){if(!this.product||!this.product.productSkus||0===this.product.productSkus.length)return null;const n=Object.values(this.selectedOptions);if(n.length!==(this.product.productOptions?.length||0)||0===n.length)return null;const i=this.product.productSkus.find((c,a)=>{if(!c.productSKUValues||0===c.productSKUValues.length)return!1;const d=c.productSKUValues.map((p,u)=>p?.productOptionValue?.id).filter(p=>{const u=null!=p;return u||console.log("  \u26a0\ufe0f Filtered out undefined/null id"),u});if(d.length!==n.length)return!1;const m=n.every(p=>d.includes(p));return d.length===n.length&&m});return i?(this.selectOptions.emit(i),this.selectQuantity.emit(this.quantity),i):null}decreaseQuantity(){this.quantity>1&&(this.quantity--,this.selectQuantity.emit(this.quantity))}increaseQuantity(){this.quantity++,this.selectQuantity.emit(this.quantity)}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-product-info"]],inputs:{product:"product"},outputs:{selectOptions:"selectOptions",selectQuantity:"selectQuantity",addToCart:"addToCart"},features:[t.OA$],decls:1,vars:1,consts:[["class","tw-grid tw-grid-cols-1 tw-gap-4 tw-py-4 tw-px-4 md:tw-px-10 bg-app",4,"ngIf"],[1,"tw-grid","tw-grid-cols-1","tw-gap-4","tw-py-4","tw-px-4","md:tw-px-10","bg-app"],[1,"tw-text-2xl","lg:tw-text-2xl","tw-font-medium","tw-antialiased"],[1,"tw-flex","tw-flex-col","tw-gap-2"],[1,"lh-sm"],[1,"fs-6","fw-semibold","lh-sm"],["class","mt-2",4,"ngFor","ngForOf"],[1,"mt-2","tw-flex","tw-flex-row","tw-gap-3"],[1,"border","tw-flex","tw-items-center"],["nz-button","","nzType","text",3,"click"],["nz-icon","","nzType","minus","nzTheme","outline"],["nz-button","","nzType","text"],[1,"fw-semibold"],["nz-icon","","nzType","plus","nzTheme","outline"],[1,"tw-hidden","tw-flex-1","md:tw-block","tw-bg-zinc-900","tw-text-white","tw-rounded-sm","tw-p-3","tw-basis-60","tw-font-semibold","tw-text-xs","add-to-cart-btn",3,"click"],[1,"tw-border","tw-flex-1","tw-border-neutral-950","tw-rounded-sm","tw-p-2","tw-basis-60","tw-font-semibold","tw-text-xs","hover:tw-bg-zinc-900","hover:tw-text-white",3,"click"],[1,"tw-my-8"],[3,"description"],[1,"mt-2"],[1,"mb-1","fw-semibold"],["nz-button","","nzType","default","class","tw-mr-2 tw-mb-2 bg-app",3,"ngClass","selected","click",4,"ngFor","ngForOf"],["nz-button","","nzType","default",1,"tw-mr-2","tw-mb-2","bg-app",3,"ngClass","click"]],template:function(e,i){1&e&&t.DNE(0,dt,24,5,"div",0),2&e&&t.Y8G("ngIf",i.product)},dependencies:[l.YU,l.Sq,l.bT,_.aO,_.dn,k.c,M.p,st,P.Dn],styles:["[_nghost-%COMP%]     button.selected{border:1px black solid;color:#000}.bg-app[_ngcontent-%COMP%]{background-color:var(--background-color)}.add-to-cart-btn[_ngcontent-%COMP%]{transition:all .3s ease}.add-to-cart-btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color)!important;color:#18181b!important;border:1px solid rgb(24,24,27)!important}"]})}}return o})();const ut=[{path:"",redirectTo:"/",pathMatch:"full"},{path:":slug",component:(()=>{class o{constructor(n,e,i,c){this.route=n,this.productDetailService=e,this.basketService=i,this.trackingService=c,this.productPhotos=[],this.productId$=new j.t(null),this.destroy$=new x.B}ngOnInit(){this.route.paramMap.pipe((0,h.Q)(this.destroy$)).subscribe(n=>{this.productSlug=n.get("slug"),this.loadProduct()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadProduct(){this.productDetailService.getProductBySlug(this.productSlug).pipe((0,h.Q)(this.destroy$)).subscribe({next:n=>{this.product=n,this.productPhotos=this.product.photos,this.productId$.next(this.product.id),this.trackingService.trackProductView(this.product.id)},error:n=>{404==n.status||400==n.status&&console.log(n)}})}optionSelected(n){this.selectedProductSKU=n}quantitySelected(n){this.selectedQuantity=n}addToCart(){this.selectedProductSKU?!this.selectedQuantity||this.selectedQuantity<=0?console.error("S\u1ed1 l\u01b0\u1ee3ng kh\xf4ng h\u1ee3p l\u1ec7"):(this.basketService.addItemToBasket(this.selectedProductSKU,this.product,this.selectedQuantity),this.trackingService.trackAddToCart(this.product.id,this.selectedProductSKU.id).pipe((0,h.Q)(this.destroy$)).subscribe({next:()=>{},error:n=>console.error("Track ATC failed:",n)})):console.error("Ch\u01b0a ch\u1ecdn s\u1ea3n ph\u1ea9m SKU")}static{this.\u0275fac=function(e){return new(e||o)(t.rXU(b.nX),t.rXU(z),t.rXU(E.S),t.rXU(y))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-product-detail"]],decls:7,vars:7,consts:[[1,"tw-min-h-screen","md:tw-min-h-[25vh]","tw-flex","tw-flex-col","lg:tw-flex-row"],[1,"tw-w-full","lg:tw-w-2/3",3,"photos"],[1,"tw-w-full","lg:tw-w-1/3",3,"product","selectOptions","selectQuantity","addToCart"],[1,"tw-my-8"],["type","similar","title","Same style products",3,"productId","limit","columns"],[1,"tw-w-full","tw-flex","tw-items-center","tw-fixed","tw-border-t","bg-app","tw-h-[65px]","tw-bottom-0","md:tw-invisible",3,"atcClicked"]],template:function(e,i){1&e&&(t.j41(0,"div",0),t.nrm(1,"app-product-images",1),t.j41(2,"app-product-info",2),t.bIt("selectOptions",function(a){return i.optionSelected(a)})("selectQuantity",function(a){return i.quantitySelected(a)})("addToCart",function(){return i.addToCart()}),t.k0s()(),t.j41(3,"div",3),t.nrm(4,"app-recommendation",4),t.nI1(5,"async"),t.k0s(),t.j41(6,"app-products-footer",5),t.bIt("atcClicked",function(){return i.addToCart()}),t.k0s()),2&e&&(t.R7$(1),t.Y8G("photos",i.productPhotos),t.R7$(1),t.Y8G("product",i.product),t.R7$(2),t.Y8G("productId",t.bMT(5,5,i.productId$))("limit",8)("columns",4))},dependencies:[W,Z,it,pt,l.Jj],styles:[".bg-app[_ngcontent-%COMP%]{background-color:var(--background-color)}"]})}}return o})()}];let mt=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[b.iI.forChild(ut)]})}}return o})(),gt=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[l.MD,mt,$.U]})}}return o})()}}]);