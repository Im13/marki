"use strict";(self.webpackChunkClientUI=self.webpackChunkClientUI||[]).push([[37],{2037:(G,p,s)=>{s.r(p),s.d(p,{CheckoutModule:()=>$});var l=s(177),g=s(9863),d=s(2461),r=s(4341),t=s(7705),f=s(5559),v=s(3587),b=s(1626);let k=(()=>{class n{constructor(e){this.http=e,this.baseApiUrl=v.c.apiUrl}createOrder(e){return console.log(e),this.http.post(this.baseApiUrl+"orders",e)}getProvinces(){return this.http.get(this.baseApiUrl+"address/provinces")}getDistricts(e){return this.http.get(this.baseApiUrl+"address/districts/"+e)}getWards(e){return this.http.get(this.baseApiUrl+"address/wards/"+e)}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(b.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var m=s(7529),u=s(4696),w=s(1011),h=s(4378);function F(n,i){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=i.$implicit;t.R7$(1),t.SpI("",e.productOptionValue.valueName," ")}}function C(n,i){if(1&n&&(t.j41(0,"div",56)(1,"div",57),t.nrm(2,"img",58),t.j41(3,"div",59)(4,"div",60)(5,"div",61),t.EFF(6),t.k0s(),t.j41(7,"div"),t.DNE(8,F,2,1,"span",62),t.k0s()(),t.j41(9,"div",63)(10,"span",64),t.EFF(11),t.nI1(12,"number"),t.k0s()()()()()),2&n){const e=i.$implicit;t.R7$(2),t.Y8G("src",e.pictureUrl,t.B4B),t.R7$(4),t.Lme("",e.productName," x ",e.quantity," "),t.R7$(2),t.Y8G("ngForOf",e.productSKUValues),t.R7$(3),t.SpI("",t.bMT(12,5,e.price*e.quantity),"\u0111")}}function y(n,i){if(1&n&&(t.j41(0,"nz-collapse-panel",48),t.DNE(1,C,13,7,"div",49),t.j41(2,"div",50)(3,"div",51)(4,"span",52),t.EFF(5,"Subtotal:"),t.k0s(),t.j41(6,"span",52),t.EFF(7),t.nI1(8,"number"),t.k0s()(),t.j41(9,"div",53)(10,"span",52),t.EFF(11,"Shipping fee:"),t.k0s(),t.j41(12,"span",52),t.EFF(13),t.nI1(14,"number"),t.k0s()()(),t.j41(15,"div",54)(16,"span"),t.EFF(17,"Total"),t.k0s(),t.j41(18,"span",55),t.EFF(19),t.nI1(20,"number"),t.k0s()()()),2&n){const e=t.XpG().ngIf,o=t.sdS(8),a=t.XpG();t.Y8G("nzExtra",o),t.R7$(1),t.Y8G("ngForOf",a.processedBasketItems),t.R7$(6),t.SpI("",t.bMT(8,5,e.subtotal),"\u0111"),t.R7$(6),t.SpI("",t.bMT(14,7,e.shipping),"\u0111"),t.R7$(6),t.SpI("",t.bMT(20,9,e.total),"\u0111")}}function z(n,i){if(1&n&&(t.j41(0,"span",65),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&n){const e=t.XpG().ngIf;t.R7$(1),t.SpI("",t.bMT(2,1,e.total),"\u0111")}}function _(n,i){1&n&&(t.j41(0,"span",66),t.EFF(1,"Please enter your full name"),t.k0s())}function x(n,i){1&n&&(t.j41(0,"span",66),t.EFF(1,"Please enter your phone number"),t.k0s())}function j(n,i){1&n&&(t.j41(0,"span",66),t.EFF(1,"Please enter your address"),t.k0s())}function S(n,i){if(1&n&&t.nrm(0,"nz-option",67),2&n){const e=i.$implicit;t.Y8G("nzLabel",e.name)("nzValue",e.id)}}function I(n,i){1&n&&(t.j41(0,"span",66),t.EFF(1,"Please select province / city"),t.k0s())}function E(n,i){if(1&n&&t.nrm(0,"nz-option",67),2&n){const e=i.$implicit;t.Y8G("nzLabel",e.name)("nzValue",e.id)}}function T(n,i){1&n&&(t.j41(0,"span",66),t.EFF(1,"Please select district / county"),t.k0s())}function M(n,i){if(1&n&&t.nrm(0,"nz-option",67),2&n){const e=i.$implicit;t.Y8G("nzLabel",e.name)("nzValue",e.id)}}function N(n,i){1&n&&(t.j41(0,"span",66),t.EFF(1,"Please select ward / commune"),t.k0s())}function R(n,i){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"div",1)(2,"form",2),t.bIt("ngSubmit",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.onSubmit())}),t.j41(3,"div",3)(4,"nz-collapse",4),t.DNE(5,y,21,11,"nz-collapse-panel",5),t.nI1(6,"async"),t.k0s(),t.DNE(7,z,3,3,"ng-template",null,6,t.C5r),t.k0s(),t.j41(9,"div",7)(10,"h6",8),t.EFF(11,"Shipping information"),t.k0s(),t.j41(12,"span"),t.EFF(13,"Do you have an account? "),t.j41(14,"a",9),t.EFF(15,"Login"),t.k0s()(),t.j41(16,"nz-form-item")(17,"nz-form-control",10),t.nrm(18,"input",11),t.DNE(19,_,2,0,"span",12),t.k0s()(),t.j41(20,"nz-form-item")(21,"nz-form-control",13),t.nrm(22,"input",14),t.DNE(23,x,2,0,"span",12),t.k0s()(),t.j41(24,"nz-form-item")(25,"nz-form-control",13),t.nrm(26,"input",15),t.DNE(27,j,2,0,"span",12),t.k0s()(),t.j41(28,"div",16)(29,"div",17)(30,"nz-select",18),t.bIt("ngModelChange",function(a){t.eBV(e);const c=t.XpG();return t.Njj(c.onProvinceChange(a))}),t.DNE(31,S,1,2,"nz-option",19),t.k0s()(),t.j41(32,"div",20),t.EFF(33," Province/City"),t.k0s()(),t.DNE(34,I,2,0,"span",12),t.j41(35,"div",21)(36,"div",17)(37,"nz-select",22),t.bIt("ngModelChange",function(a){t.eBV(e);const c=t.XpG();return t.Njj(c.onDistrictChange(a))}),t.DNE(38,E,1,2,"nz-option",19),t.k0s()(),t.j41(39,"div",20),t.EFF(40," District/County"),t.k0s()(),t.DNE(41,T,2,0,"span",12),t.j41(42,"div",21)(43,"div",17)(44,"nz-select",23),t.DNE(45,M,1,2,"nz-option",19),t.k0s()(),t.j41(46,"div",20),t.EFF(47," Ward/Commune"),t.k0s()(),t.DNE(48,N,2,0,"span",12),t.k0s(),t.j41(49,"div",24)(50,"h6",25),t.EFF(51,"Shipping method"),t.k0s(),t.j41(52,"div",26)(53,"div",27),t.nrm(54,"input",28),t.j41(55,"label",29)(56,"div",30),t.EFF(57,"Shipping fee"),t.k0s(),t.j41(58,"div",31),t.EFF(59),t.nI1(60,"number"),t.k0s()()()(),t.j41(61,"h6",32),t.EFF(62,"Payment method"),t.k0s(),t.j41(63,"div",26)(64,"div",27),t.nrm(65,"input",33),t.j41(66,"label",34),t.nrm(67,"img",35),t.j41(68,"div",36),t.EFF(69,"Payment on delivery (COD)"),t.k0s()()(),t.j41(70,"div",27),t.nrm(71,"input",37),t.j41(72,"label",38),t.nrm(73,"img",39),t.j41(74,"div",36),t.EFF(75,"Bank transfer "),t.k0s()()(),t.j41(76,"div",40),t.nrm(77,"input",41),t.j41(78,"label",42),t.nrm(79,"img",43),t.j41(80,"div",36),t.EFF(81,"Payment with VNPAY "),t.k0s()()()(),t.j41(82,"div",44)(83,"button",45),t.EFF(84,"Complete order"),t.k0s(),t.j41(85,"div",46)(86,"a",47),t.EFF(87,"Cart"),t.k0s()()()()()()()}if(2&n){const e=i.ngIf,o=t.XpG();t.R7$(2),t.Y8G("formGroup",o.checkoutFrm),t.R7$(3),t.Y8G("ngIf",o.isDisplayingOrder&&t.bMT(6,13,o.basketService.basketSource$)),t.R7$(14),t.Y8G("ngIf",!o.checkoutFrm.get("fullName").valid&&o.checkoutFrm.get("fullName").touched),t.R7$(4),t.Y8G("ngIf",!o.checkoutFrm.get("phone").valid&&o.checkoutFrm.get("phone").touched),t.R7$(4),t.Y8G("ngIf",!o.checkoutFrm.get("street").valid&&o.checkoutFrm.get("street").touched),t.R7$(4),t.Y8G("ngForOf",o.provinces),t.R7$(3),t.Y8G("ngIf",o.checkoutFrm.get("province").touched&&0==o.checkoutFrm.get("province").value),t.R7$(4),t.Y8G("ngForOf",o.districts),t.R7$(3),t.Y8G("ngIf",o.checkoutFrm.get("district").touched&&0==o.checkoutFrm.get("district").value),t.R7$(4),t.Y8G("ngForOf",o.wards),t.R7$(3),t.Y8G("ngIf",o.checkoutFrm.get("ward").touched&&0==o.checkoutFrm.get("ward").value),t.R7$(11),t.JRh(t.bMT(60,15,e.shipping)),t.R7$(24),t.Y8G("disabled",!o.checkoutFrm.valid)}}const D=[{path:"",component:(()=>{class n{constructor(e,o,a){this.basketService=e,this.checkoutService=o,this.router=a,this.isDisplayingOrder=!0,this.selectedProvince=0,this.selectedDistrict=0,this.selectedWard=0,this.processedBasketItems=[],this.basketItems=[]}ngOnInit(){this.checkoutFrm=new r.gE({fullName:new r.MJ("full name",r.k0.required),phone:new r.MJ("098888888",r.k0.required),street:new r.MJ("test street",r.k0.required),province:new r.MJ(0,[r.k0.required,this.forbiddenSelect.bind(this)]),district:new r.MJ(0,[r.k0.required,this.forbiddenSelect.bind(this)]),ward:new r.MJ(0,[r.k0.required,this.forbiddenSelect.bind(this)])}),this.basketItems=this.basketService.getCurrentBasketValue().items,this.processedBasketItems=this.basketItems.map(e=>({...e,formattedSKUValues:e.productSKUValues.map(o=>o.productOptionValue.valueName).join(" / ")})),this.checkoutService.getProvinces().subscribe({next:e=>{this.provinces=e},error:e=>{console.log(e)}})}forbiddenSelect(e){return 0==e.value?{control:!1}:null}toggleDisplayOrder(){this.isDisplayingOrder=!this.isDisplayingOrder}onSubmit(){const e=this.basketService.getCurrentBasketValue();if(!e)return;const o=this.getOrderToCreate(e);o&&this.checkoutService.createOrder(o).subscribe({next:a=>{this.basketService.deleteLocalBasket(),this.router.navigate(["checkout/success"],{state:a})}})}getOrderToCreate(e){const a={fullName:this.checkoutFrm.value.fullName,cityOrProvinceId:this.checkoutFrm.value.province,districtId:this.checkoutFrm.value.district,street:this.checkoutFrm.value.street,wardId:this.checkoutFrm.value.ward,phoneNumber:this.checkoutFrm.value.phone};var c=this.basketService.getBasketTotalValue();return a?{basketId:e.id,deliveryMethodId:1,shipToAddress:a,shippingFee:c.shipping,orderDiscount:0,bankTransferedAmount:0,extraFee:0,total:c.total,orderNote:""}:null}onProvinceChange(e){this.checkoutService.getDistricts(e).subscribe({next:o=>{this.districts=o}})}onDistrictChange(e){this.checkoutService.getWards(e).subscribe({next:o=>{this.wards=o}})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(f.S),t.rXU(k),t.rXU(d.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-checkout"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"tw-flex","md:tw-my-5"],[1,"tw-flex","tw-flex-col","lg:tw-flex-row","tw-w-full",3,"formGroup","ngSubmit"],[1,"bg-app","lg:tw-w-1/3","lg:tw-border-r","tw-p-3"],["nzExpandIconPosition","left",1,"bg-app"],["nzHeader","Display order information","nzActive","true","class","bg-app",3,"nzExtra",4,"ngIf"],["extraTpl",""],[1,"bg-app","lg:tw-w-1/3","md:tw-border-r","tw-p-3"],[1,"tw-my-2","tw-font-semibold","tw-antialiased"],["href","#",1,"tw-underline","tw-underline-offset-4"],[1,"w-100","mt-2","mb-1"],["nz-input","","placeholder","Full name","formControlName","fullName",1,"w-100","py-2","bg-app"],["class","invalid-text text-danger",4,"ngIf"],[1,"w-100","my-1"],["nz-input","","placeholder","Phone number","formControlName","phone",1,"w-100","py-2","bg-app"],["nz-input","","placeholder","Address","formControlName","street",1,"w-100","py-2","bg-app"],["nz-row","",1,"my-1","border"],["nz-col","","nzSpan","18"],["nzShowSearch","","formControlName","province","nzBorderless","","nzPlaceHolder","Select province / city",1,"w-100","h-100","bg-app","tw-text-sm",3,"ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-col","","nzSpan","6",1,"d-flex","align-items-center","justify-content-center","border-start","tw-text-sm","bg-app"],["nz-row","",1,"my-2","border"],["formControlName","district","nzBorderless","","nzPlaceHolder","Select district / county",1,"w-100","h-100",3,"ngModelChange"],["formControlName","ward","nzBorderless","","nzPlaceHolder","Select ward / commune",1,"w-100","h-100"],[1,"bg-app","lg:tw-w-1/3","tw-p-3"],[1,"tw-my-2","tw-font-semibold"],[1,"border","rounded","form-group"],[1,"d-flex","align-items-center","border-bottom","flex-row"],["type","radio","name","deliveryMethod","id","deliveryMethod","checked","",1,"p-0","mx-3"],["for","deliveryMethod","nz-row","",1,"w-100","d-flex","flex-row","py-3"],["nz-col","","nzSpan","19",1,"d-flex","align-items-center"],["nz-col","","nzSpan","5",1,"text-end","pe-2"],[1,"mt-4","mb-3"],["type","radio","name","deliveryRadio","id","codRadio","checked","",1,"p-0","mx-3"],["for","codRadio","nz-row","",1,"w-100","d-flex","flex-row","py-3"],["src","../../assets/icons/delivery.png","nz-col","","nzSpan","3",1,"w-100"],["nz-col","","nzSpan","21",1,"w-100","ps-3","d-flex","align-items-center"],["type","radio","name","deliveryRadio","id","bankRadio",1,"m-0","p-0","mx-3"],["for","bankRadio","nz-row","",1,"w-100","d-flex","flex-row","py-3"],["src","../../assets/icons/give-money.png","nz-col","","nzSpan","3",1,"w-100"],[1,"d-flex","align-items-center","flex-row"],["type","radio","name","deliveryRadio","id","vnpayRadio","disabled","",1,"form-check-input","m-0","p-0","mx-3"],["for","vnpayRadio","nz-row","",1,"w-100","d-flex","flex-row","py-3"],["src","../../assets/icons/vnpay.png","nz-col","","nzSpan","3",1,"w-100"],[1,"py-3"],["type","submit",1,"btn","btn-dark","w-100","p-2","rounded-0",3,"disabled"],[1,"back-to-cart","mt-3","d-flex","justify-content-center"],["routerLink","/basket",1,"text-decoration-none"],["nzHeader","Display order information","nzActive","true",1,"bg-app",3,"nzExtra"],["class","bg-app mb-3",4,"ngFor","ngForOf"],[1,"border-bottom","border-top","py-3"],[1,"d-flex","justify-content-between"],[1,"pre-cal-title"],[1,"d-flex","justify-content-between","mt-2"],[1,"d-flex","justify-content-between","align-items-center","py-2"],[1,"tw-text-md","tw-font-semibold"],[1,"bg-app","mb-3"],[1,"tw-flex","tw-flex-row","lg:tw-p-2"],[1,"tw-w-[30%]","md:tw-w-[15%]",3,"src"],[1,"tw-w-[70%]","md:tw-w-[85%]","tw-flex","tw-flex-row"],[1,"tw-w-[80%]","md:tw-w-[70%]","tw-flex","tw-flex-col","lg:tw-justify-between","tw-pl-3","lg:tw-pl-6"],[1,"tw-font-medium","tw-text-md","tw-antialiased"],[4,"ngFor","ngForOf"],[1,"tw-w-[20%]","md:tw-w-[30%]","tw-flex","tw-flex-col","tw-justify-end","lg:tw-justify-between","tw-items-end"],[1,"tw-font-semibold","lg:tw-pb-1"],[1,"tw-text-sm","tw-font-semibold"],[1,"invalid-text","text-danger"],[3,"nzLabel","nzValue"]],template:function(o,a){1&o&&(t.DNE(0,R,88,17,"div",0),t.nI1(1,"async")),2&o&&t.Y8G("ngIf",t.bMT(1,1,a.basketService.basketTotalSource$))},dependencies:[l.Sq,l.bT,d.Wk,m.Uq,m.e,u.Vz,u.pc,w.Sy,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,h.ld,h.WI,l.Jj,l.QX],styles:[".ant-collapse-header{display:flex;align-items:center!important}  .ant-collapse-header>div{display:flex}.bg-app[_ngcontent-%COMP%]{background-color:var(--background-color)}[_nghost-%COMP%]     .bg-app.ant-collapse .ant-collapse-item{background-color:var(--background-color)!important}[_nghost-%COMP%]     .bg-app.ant-collapse .ant-collapse-item .ant-collapse-header{background-color:var(--background-color)!important}[_nghost-%COMP%]     .bg-app.ant-collapse .ant-collapse-item .ant-collapse-content{background-color:var(--background-color)!important}[_nghost-%COMP%]     .bg-app.ant-collapse .ant-collapse-item .ant-collapse-content-box{background-color:var(--background-color)!important}[_nghost-%COMP%]     .ant-collapse.bg-app .ant-collapse-item{background-color:var(--background-color)!important}[_nghost-%COMP%]     .ant-collapse.bg-app .ant-collapse-item .ant-collapse-header{background-color:var(--background-color)!important}[_nghost-%COMP%]     .ant-collapse.bg-app .ant-collapse-item .ant-collapse-content{background-color:var(--background-color)!important}[_nghost-%COMP%]     .ant-collapse.bg-app .ant-collapse-item .ant-collapse-content-box{background-color:var(--background-color)!important}"]})}}return n})()},{path:"**",redirectTo:"/",pathMatch:"full"}];let O=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(D)]})}}return n})(),$=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[l.MD,g.U,O]})}}return n})()}}]);